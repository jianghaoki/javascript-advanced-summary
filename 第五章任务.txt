姜豪   2018011919   6班
《JavaScript权威指南》
第八章 函数
8.1 函数定义
函数使用function关键字来定义，它可以用在函数定义表达式或者函数声明语句里。
函数名称标识符。函数名称是是函数声明语句必需的部分。
它的用途就像变量的名字，新定义的函数对象会赋值给这个变量。
对函数定义表达式来说，这个名字是可选的；
如果存在，该名字只存在于函数体中，并指代该函数对象本身。
一对圆括号，其中包含由0个或者多个用逗号隔开的标识符组成的列表。
一对花括号，其中包含0条或多条JavaScript语句。
这些语句构成了函数体，一旦调用函数，就会执行这些语句。
以表达式方式定义的函数，函数的名称是可选的。
一条函数声明语句实际上声明了一个变量，并把一个函数对象赋值给它。
如果一个函数定义表达式包含名称，函数的局部作用域将会包含一个绑定到函数对象的名称。
实际上，函数的名称将成为函数内部的一个局部变量。
任何合法的的JavaScript标识符都可以用做一个函数的名称。
return语句导致函数停止执行，并返回它的表达式的值给调用者。
在JavaScript里，函数可以嵌套在其他函数里。

8.2 函数调用
构成函数主体的JavaScript代码在定义之时并不会执行，只有调用该函数时，
它们才会执行。有4种方式来调用JavaScript函数：
作为函数；作为方法；作为构造函数；
通过它们的的call（）和apply（）方法间接调用；
一个调用表达式有多个函数表达式组成，每个函数表达式都是由一个函数对象和左圆括号、
参数列表和右圆括号组成，参数列表是由逗号分隔的零个或多个参数表达式组成。
如果函数表达式是一个属性访问表达式，即该函数是一个对象的属性或数组中的一个元素，
那么它就是一个方法调用表达式。
在一个调用中，每个参数表达式（圆括号之间的部分）都会计算出一个值，
计算的结果作为参数传递给另外一个函数。
这些值作为实参传递给声明函数时定义的形。
在函数体中存在一个形参的引用，指向当前传入的实参列表，通过它可以获得参数的值。
对于普通的函数调用，函数的返回值成为调用表达式的值。
如果该函数返回是因为解释器到达结尾，返回值就是undefined。
如果函数返回是因为解释器执行到一条return语句，返回值就是return之后的表达式的值，
如果return语句没有值，则返回undefned。
以函数形式调用的函数通常不使用this关键字，不过"this"可以用来判断当前是否是严格模式。
函数表达式本身就是一个属性访问表达式，这意味着该函数被当做一个方法，
而不是作为一个普通函数来调用。
大多数方法调用使用点符号来访问属性，使用方括号（的属性访问表达式）也可以进行属性访问操作。
this是-一个关键字，不是变量，也不是属性名。JavaScript的语法不允许给this赋值。
和变量不同，关键字this没有作用域的限制，嵌套的函数不会从调用它的函数中继承this。
如果嵌套函数作为方法调用，其this的值指向调用它的对象。
如果嵌套函数作为函数调用，其this值不是全局对象(非严格模式下)就是undefined (严格模式下)。
如果函数或者方法调用之前带有关键字new，它就构成构造函数调用。
构造函数调用和普通的函数调用以及方法调用在实参处理、调用上下文和返回值方面都有不同。
如果构造函数调用在圆括号内包含一组实参列表，先计算这些实参表达式，然后传入函数内，
这和函数调用和方法调用是一致的。但如果构造函数没有形参，
JavaScript构造函数调用的语法是允许省略实参列表和A括号的。
凡是没有形参的构造函数调用都可以省略圆括号。
构造函数调用创建一个新的空对象，这个对象继承自构造函数的prototype属性。
构造函数试图初始化这个新创建的对象，并将这个对象用做其调用上下文，
因此构造函数可以使用this关键宇来引用这个新创建的对象。
构造函数通常不使用return关键字，它们通常初始化新对象，
当构造函数的函数体执行完毕时，它会显式返回。
在这种情况下，构造函数调用表达式的计算结果就是这个新对象的值。
然而如果构造函数显式地使用r etur n语句返回一个对象，
那么调用表达式的值就是这个对象。如果构造函数使用return语句但没有指定返回值，
或者返回一个原始值，那么这时将忽略返回值，同时使用这个新对象作为调用结果。

8.3 函数的实参和形参
JavaScript中的函数定义并未指定函数形参的类型，函数调用也未对传入的实参值做任何类型检查。
当调用函数的时候传入的实参比函数声明时指定的形参个数要少，剩下的形参都将设置为undefined。
“||”运算符如果第一个实参是真值的话就返回第一个实参，否则返回第二个。
当调用函数的时候传入的实参个数超过函数定义时的形参个数时，
没有办法直接获得未命名值的引用。
在函数体内，标识符arguments是指向实参对象的引用，实参对象是一个类数组对象。
实参对象有一个重要的用途，就是让函数可以操作任意数量的实参。
arguments并不是真正的数组，它是一个实参对象。
每个实参对象都包含以数字为索引的一组元素以及length属性，但他不是真正的数组。
除了数组元素，实参对象还定义了callee和caller属性。
定义函数的时候，传入的实参都写入一个单独的对象之中，
在调用的时候传入一个对象，对象中的名/值对是真正需要的实参数据。
JavaScript方法的形参并未声明类型，在形参传入函数体之前也未作任何类型检查。
8.4 作为值的函数
函数可以定义，也可以调用，这是函数最重要的特性。
函数甚至不需要带名字，把它们赋值给数组元素。
JavaScript中的函数并不是原始值，而是一种特殊的对象。
函数可以拥有属性。当函数需要一个“静态”变量来在调用时保持某个值不变，
最方便的方式就是给函数定义属性，而不是定义全局变量，
显然定义全局变量会让命名空间变得更加杂乱无章。
函数不能两次返回同一个值，为了做到这一点，函数必须能够跟踪它每次返回的值，
而且这些值的信息需要在不同的函数调过程中持久化。
可以将这些信息存放到全局变量中，但这并不是必需的，因为这个信息仅仅是函数本身用到的。

8.5 作为命名空间的函数
JavaScript中的函数作用域的概念:
在函数中声明的变量在整个函数体内都是可见的，在函数外部是不可见的。
不在任何函数内声明的变量是全局变量，在整个JavaScript程序中都是可见的。
function之前的左圆括号是必需的，因为如果不写这个左圆括号，
JavaScript解释器会试图将关键字function解析为函数声明语句。
使用圆括号JavaScript解释器才会正确地将其解析为函数定义表达式。
8.6 闭包
函数对象可以通过作用域链相互关联起来，函数体内部的变量都可以保存在函数作用域中，
这种特性在计算机科学文献中成为“闭包”。
我们将作用域链描述为一个对象列表，不是绑定的栈。
每次调用JavaScript函数的时候，都会为之创建一个新的对象用来保存局部变量，
把这个对象添加至作用城链中。
当函数返回的时候，就从作用城链中将这个绑定变量的对象删除。
如果不存在嵌套的函数，也没有其他引用指向这个绑定对象，
它就会被当做垃圾回收掉。
如果定义了嵌套的函数，每个嵌套的函数都各自对应一个作用城链，
并且这个作用城链指向一个变量绑定对象。
但如果这些嵌套的函数对象在外部函数中保存下来，
那么它们也会和所指向的变量绑定对象一样当做垃圾回收。
但是如果这个函数定义了嵌套的函数，
并将它作为返回值返回或者存储在莱处的属性里，
这时就会有一个外部引用指向这个嵌套的函数。
它就不会被当做垃圾回收，并且它所指向的变量绑定对象也不会被当做垃圾回收。

8.7 函数属性、方法和构造函数
在函数体里，arguments.length表示传入函数的实参的个数。
而函数本身的1ength属性则有着不同含义。
函数的lengt h属性是只读属性，它代表函数实参的数量，
这里的参数指的是“形参”而非“实参”，也就是在函数定义时给出的实参个数，
通常也是在函数调用时期望传入函数的实参个数。
call()和apply()的第一个实参是要调用函数的母对象，它是调用上下文，
在函数体内通过this来获得对它的引用。
如果一个函数的实参可以是任意数量，给apply()传入的参数数组可以是任意长度的。
比如，为了找出数组中最大的数值元素，调用Math.max()方法的时候，
可以给apply()传入一个包含任意个元素的数组。
Function()构造函数可以传入任意数量的字符串实参，
最后一个实参所表示的文本就是函数体:它可以包含任意的JavaScript语句，
每两条语句之间用分号分隔。传入构造函数的其他所有的实参字符串是指定函数的形参名字的字符串。
如果定义的函数不包含任何参数，只须给构造函数简单地传入一个字符串即可。
Function()构造函数并不需要通过传人实参以指定函数名。
就像函数直接量一样，Function()构造函数创建一个匿名函数。
Function( )构造函数允许JavaScript在运行时动态地创建并编译函数。
每次调用Function()构造函数都会解析函数体，并创建新的函数对象。
如果是在一个循环或者多次调用的函数中执行这个构造函数，执行效率会受影响。
相比之下，循环中的嵌套函数和函数定义表达式则不会每次执行时都重新编译。

8.8 函数式编程
高阶函数：操作函数的函数，
它接收一个或多个函数作为参数，并返回一个新函数。
在函数式编程当中，缓存计算结果的技巧叫做“记忆”。
memorize（）接收一个函数作为实参，并返回带有记忆能力的函数。
memorize()函数创建-一个新的对象，这个对象被当做缓存(宿主)
并赋值给一个局部变量，因此对于返回的函数来说它是私有的(在闭包中)。
所返回的函数将它的实参数组转换成字符串，并将字符串用做缓存对象的属性名。
如果在缓存中存在这个值，则直接返回它。

《深入理解JavaScript》
第15章 函数
函数是可以被调用的值。一种定义函数的方式叫函数声明。
如果一个函数没有任何东西返回，那么默认会返回undefined。
15.1 JavaScript中函数的3种形式
非方法的函数（“普通函数”）
通常，函数作为构造器，其命名都以大写字母开始。
可以将函数存储为一个对象的属性，这时它将变成一个方法，可以通过对象来调用。
形参被用在定义函数时；实参在函数调用时被使用。
15.3 定义函数
通过函数表达式；通过函数声明；通过Function（）构造器
函数表达式会产生一个值――函数对象
函数声明定义了一个新的变量，创建了一个函数对象，
并将函数对象赋值给这个新的变量。
Function（）构造器执行传给它的JavaScript代码字符串。

15.4 函数提升
函数声明是做了完全提升的，而变量声明则是部分提升。
使用var的定义是会进行代码提升的，但是只对于声明有效，对于赋值过程无效
15.5 函数的名称
大多数的JavaScript引擎对于函数对象都会提供一个非标准的name属性。
匿名函数表达式的name则是一个空字符串
具名函数表达式也有一个name。
15.7 控制函数调用:call(),apply()和bind()
apply（）往往用在一个函数需要以类似数组（又不是数组）的形式接受多个参数。
func.bind(thisValue, arg1, ... argN)
这个方法会执行部分的函数功能，它会创建-个新的函数,这个函数会调用func,
并会将thisValue指定为this,同时应用以下参数: 
arg1直到argN,紧随其后的是新函数的实际参数。

15.8参数缺失或者超出时的处理
JavaScript中并不限制一个函数的参数数量:因此你事实上可以抛开函数定义
的参数限制，向一个函数传入任意数量的实参。
这就导致了实参和形参可能出现两种差异:
(1)实参数量多于形参
对此，多余的参数是会被忽略的，但是能在类数组的arguments中被获取到。
(2)实参数量少于形参
缺失的形参都会被赋予undefined的值。
arguments有以下的特征:
它是类数组的，但又非数组。
一方面，它有一个length属性，所有的参数都可以通过索引值来进行读写。
另一方面，arguments 不是一个数组，它仅仅是类似。
它是-一个对象，因此它支持所有的对象方法和操作。

15.9 具名参数
在编程语言中调用函数或者方式时，你必须将实参( 由调用者指定)
和形参(函数定义中指明)做映射。通常有两种方式:
通过位置来映射的位置型参数。第-一个实参对 应第一个形参，
第二个实参对应第二个形参，以此类推。
具名参数则通过名称(标识)来做变量的映射。
在一个函数的定义中名称会与形参做关联，在函数调用中，名称则与实参做关联。
具名参数有两个优点:它们对函数的参数进行了描述，
同时它们对于处理可选参数的场景也很有用。








